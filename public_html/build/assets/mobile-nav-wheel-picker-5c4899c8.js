class g{constructor(){this.navigation=null,this.container=null,this.iconsContainer=null,this.items=[],this.initialActiveItem=null,this.sidePadding=20,this.isInitialized=!1,this.isLoading=!0,this.originalItems=new Map,this.init()}init(){this.isInitialized||(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{this.setupNavigation()}):this.setupNavigation())}setupNavigation(){if(this.navigation=document.querySelector(".mb-navigation"),!this.navigation){console.warn("MobileNavCore: –≠–ª–µ–º–µ–Ω—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ DOM");return}if(this.container=document.getElementById("nav-scroll-container"),this.iconsContainer=document.getElementById("nav-icons-container"),!this.container||!this.iconsContainer){console.warn("MobileNavCore: –ù–µ –Ω–∞–π–¥–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏");return}this.items=Array.from(this.iconsContainer.querySelectorAll(".mb-icon-wrapper")),this.items.length>0?(this.setupItems(),this.isInitialized=!0,this.showNavigation(),setTimeout(()=>{this.isLoading=!1},300)):console.warn("MobileNavCore: –ù–µ –Ω–∞–π–¥–µ–Ω—ã —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏")}setupItems(){this.items.forEach((t,e)=>{t.style.setProperty("--item-index",e);const i=t.getAttribute("data-icon-id");i&&this.originalItems.set(i,t.innerHTML),t.querySelector(".mb-active")!==null&&!this.initialActiveItem&&(this.initialActiveItem=t),setTimeout(()=>{t.classList.add("mb-icon-loaded")},100+e*60)})}showNavigation(){this.navigation&&requestAnimationFrame(()=>{this.navigation.classList.add("mb-nav-loaded"),this.navigation.classList.remove("mb-nav-hidden")})}hideNavigation(){this.navigation&&requestAnimationFrame(()=>{this.navigation.classList.add("mb-nav-hidden")})}convertIconToBackButton(t){const e=this.iconsContainer.querySelector(`[data-icon-id="${t}"]`);return e?(e.classList.contains("back-button-active")||(this.originalItems.has(t)||this.originalItems.set(t,e.innerHTML),e.innerHTML=`
            <a class="mb-nav-link back-button" href="javascript:void(0);" title="–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥">
                <div class="mb-nav-icon-wrap">
                    <img class="mb-nav-icon" src="/images/icons/arrow-left.svg" alt="–ù–∞–∑–∞–¥"
                         onerror="this.src='/images/icons/back.svg';">
                </div>
            </a>
        `,e.classList.add("back-button-active"),e.querySelector(".back-button").addEventListener("click",s=>{s.preventDefault(),window.modalPanel&&window.modalPanel.activeModal&&window.modalPanel.closeModal(),this.restoreIcon(t)})),!0):(console.warn(`–ò–∫–æ–Ω–∫–∞ —Å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º ${t} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞`),!1)}restoreIcon(t){const e=this.iconsContainer.querySelector(`[data-icon-id="${t}"]`);if(!e)return console.warn(`–ò–∫–æ–Ω–∫–∞ —Å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º ${t} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è`),!1;const i=this.originalItems.get(t);return i?(e.innerHTML=i,e.classList.remove("back-button-active"),!0):(console.warn(`–ù–µ –Ω–∞–π–¥–µ–Ω–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–ª—è –∏–∫–æ–Ω–∫–∏ ${t}`),!1)}}class f{constructor(t,e,i){this.core=t,this.scroll=e,this.popup=i,this.touchStartX=0,this.touchStartY=0,this.isTouchMoved=!1,this.isLongPress=!1,this.longPressTimer=null,this.longPressDelay=500,this.activeIconId=null,this.init()}init(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{this.setupEventListeners()}):setTimeout(()=>this.setupEventListeners(),500)}setupEventListeners(){if(!this.core.isInitialized||!this.core.container){console.warn("MobileNavEvents: –Ø–¥—Ä–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ");return}this.setupModalListeners(),this.setupTouchEvents(),this.setupClickEvents(),console.log("MobileNavEvents: –°–æ–±—ã—Ç–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã")}setupModalListeners(){if(document.addEventListener("modal.opened",t=>{var s,o;const e=(s=t.detail)==null?void 0:s.modalId;let i=(o=t.detail)==null?void 0:o.sourceIconId;if(!i&&e&&this.popup.modalTriggers.has(e)&&(i=this.popup.modalTriggers.get(e).iconId),console.log("‚ö°Ô∏è –°–æ–±—ã—Ç–∏–µ modal.opened –ø–æ–ª—É—á–µ–Ω–æ:",{modalId:e,sourceIconId:i}),e&&i){console.log(`üîÑ –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –∏–∫–æ–Ω–∫—É ${i} –≤ –∫–Ω–æ–ø–∫—É "–Ω–∞–∑–∞–¥" –¥–ª—è –º–æ–¥–∞–ª–∫–∏ ${e}`),this.activeIconId=i;const n=this.core.convertIconToBackButton(i);console.log(`–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è: ${n?"—É—Å–ø–µ—à–Ω–æ":"–æ—à–∏–±–∫–∞"}`)}}),document.addEventListener("modal.closed",t=>{var i;const e=(i=t.detail)==null?void 0:i.modalId;if(console.log("‚ö°Ô∏è –°–æ–±—ã—Ç–∏–µ modal.closed –ø–æ–ª—É—á–µ–Ω–æ:",{modalId:e,activeIconId:this.activeIconId}),e&&this.activeIconId){console.log(`üîÑ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –∏–∫–æ–Ω–∫—É ${this.activeIconId}`);const s=this.core.restoreIcon(this.activeIconId);console.log(`–†–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è: ${s?"—É—Å–ø–µ—à–Ω–æ":"–æ—à–∏–±–∫–∞"}`),this.activeIconId=null}}),window.modalPanel&&!window.modalPanel._methodsModified){const t=window.modalPanel.openModal,e=window.modalPanel.closeModal;window.modalPanel.openModal=i=>{const s=t.call(window.modalPanel,i);if(s){let o=null;if(window.modalPanel.modalSources&&window.modalPanel.modalSources.has(i)?o=window.modalPanel.modalSources.get(i):this.popup&&this.popup.modalTriggers.has(i)&&(o=this.popup.modalTriggers.get(i)),o&&o.iconId){const n=new CustomEvent("modal.opened",{detail:{modalId:i,sourceIconId:o.iconId}});document.dispatchEvent(n)}}return s},window.modalPanel.closeModal=(i=!1)=>{var o;const s=(o=window.modalPanel.activeModal)==null?void 0:o.id;if(e.call(window.modalPanel,i),s){const n=new CustomEvent("modal.closed",{detail:{modalId:s}});document.dispatchEvent(n)}},window.modalPanel._methodsModified=!0}}setupTouchEvents(){this.core.container.addEventListener("touchstart",t=>{this.touchStartX=t.touches[0].clientX,this.touchStartY=t.touches[0].clientY,this.isTouchMoved=!1;const e=document.elementFromPoint(this.touchStartX,this.touchStartY),i=e?e.closest(".mb-icon-wrapper"):null;i&&(i.classList.add("mb-touch-active"),this.longPressTimer&&clearTimeout(this.longPressTimer),this.longPressTimer=setTimeout(()=>{this.isTouchMoved||(this.isLongPress=!0,this.handleLongPress(i))},this.longPressDelay))},{passive:!0}),this.core.container.addEventListener("touchmove",t=>{if(this.longPressTimer){const e=t.touches[0].clientX,i=t.touches[0].clientY,s=Math.abs(e-this.touchStartX),o=Math.abs(i-this.touchStartY);(s>10||o>10)&&(this.isTouchMoved=!0,clearTimeout(this.longPressTimer),this.longPressTimer=null,document.querySelectorAll(".mb-touch-active").forEach(n=>{n.classList.remove("mb-touch-active")}))}},{passive:!0}),this.core.container.addEventListener("touchend",t=>{document.querySelectorAll(".mb-touch-active").forEach(e=>{e.classList.remove("mb-touch-active")}),this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null),this.isLongPress=!1},{passive:!0})}setupClickEvents(){document.querySelectorAll('.mb-icon-wrapper[data-modal="true"]').forEach(e=>{const i=e.getAttribute("data-modal-target"),s=e.getAttribute("data-icon-id");i&&s&&this.popup.modalTriggers.set(i,{element:e,iconId:s})})}handleLongPress(t){const e=t.getAttribute("data-icon-id");if(e){if(t.classList.add("mb-long-press"),navigator.vibrate)try{navigator.vibrate(50)}catch{}setTimeout(()=>{this.popup.showPopup(e),t.classList.remove("mb-long-press")},300)}}}class v{constructor(t){this.core=t,this.isPopupOpen=!1,this.currentPopupConfig=null,this.popupContainer=null,this.backdrop=null,this.swipeStartY=0,this.swipeStartX=0,this.isSwipeDetected=!1,this.minSwipeDistance=50,this.isUpSwipeInProgress=!1,this.popupConfigs={},this.userHasInteracted=!1,this.swipeTargetElement=null,this.swipeTargetIconId=null,this.modalTriggers=new Map,this.init()}init(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{this.delayedInit()}):this.delayedInit()}delayedInit(){setTimeout(()=>{this.createPopupElements(),this.loadPopupConfigsFromHtml(),this.setupSwipeDetection()},500)}loadPopupConfigsFromHtml(){const t=document.getElementById("mobile-nav-popup-configs");if(!t){console.warn("–≠–ª–µ–º–µ–Ω—Ç #mobile-nav-popup-configs –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–∞–ø–∞—Å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"),this.popupConfigs=this.getFallbackPopupConfigs();return}t.querySelectorAll("[data-popup-config]").forEach(i=>{var a;const s=i.getAttribute("data-popup-config"),o=((a=i.querySelector(".popup-config-title"))==null?void 0:a.textContent)||"",n=[];i.querySelectorAll(".popup-item").forEach(l=>{const h=l.getAttribute("data-icon"),d=l.getAttribute("data-href")||"#",u=l.getAttribute("data-modal")==="true",p=l.getAttribute("data-modal-target")||null,m=l.getAttribute("data-title")||"";n.push({icon:h,href:d,title:m,isModal:u,modalId:p})}),n.length>0&&(this.popupConfigs[s]={title:o,items:n})}),Object.keys(this.popupConfigs).length===0&&(this.popupConfigs=this.getFallbackPopupConfigs())}getFallbackPopupConfigs(){return{home:{title:"–ì–ª–∞–≤–Ω–∞—è",items:[{icon:"newspaper.svg",href:"/news",isModal:!1,title:"–ù–æ–≤–æ—Å—Ç–∏"},{icon:"calendar.svg",href:"/events",isModal:!1,title:"–°–æ–±—ã—Ç–∏—è"},{icon:"info-circle.svg",href:"/about",isModal:!1,title:"–û –Ω–∞—Å"}]},profile:{title:"–ü—Ä–æ—Ñ–∏–ª—å",items:[{icon:"gear.svg",href:"/profile/settings",isModal:!1,title:"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"},{icon:"clock-history.svg",href:"/user/templates",isModal:!1,title:"–ò—Å—Ç–æ—Ä–∏—è"},{icon:"heart.svg",href:"/user/favorites",isModal:!1,title:"–ò–∑–±—Ä–∞–Ω–Ω–æ–µ"}]},create:{title:"–°–æ–∑–¥–∞—Ç—å",items:[{icon:"file-earmark.svg",href:"/client/templates/categories",isModal:!1,title:"–®–∞–±–ª–æ–Ω—ã"},{icon:"folder-plus.svg",href:"/client/projects",isModal:!1,title:"–ü—Ä–æ–µ–∫—Ç—ã"},{icon:"image.svg",href:"/client/images",isModal:!1,title:"–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"}]},games:{title:"–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è",items:[{icon:"puzzle.svg",href:"/games/puzzle",isModal:!1,title:"–ü–∞–∑–ª—ã"},{icon:"controller.svg",href:"/games/arcade",isModal:!1,title:"–ê—Ä–∫–∞–¥—ã"},{icon:"trophy.svg",href:"/games/tournaments",isModal:!1,title:"–¢—É—Ä–Ω–∏—Ä—ã"}]},email:{title:"–ü–æ—á—Ç–∞",items:[{icon:"inbox.svg",href:"/email/inbox",isModal:!1,title:"–í—Ö–æ–¥—è—â–∏–µ"},{icon:"send.svg",href:"/email/sent",isModal:!1,title:"–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ"},{icon:"pencil.svg",href:"/email/compose",isModal:!1,title:"–ù–∞–ø–∏—Å–∞—Ç—å"}]},admin:{title:"–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ",items:[{icon:"people.svg",href:"/admin/users",isModal:!1,title:"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"},{icon:"bar-chart.svg",href:"/admin/statistics",isModal:!1,title:"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"},{icon:"gear.svg",href:"/admin/settings",isModal:!1,title:"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"}]},"qr-scanner":{title:"QR –°–∫–∞–Ω–µ—Ä",items:[{icon:"qr-code.svg",href:"#",isModal:!0,modalId:"qr-scanner-modal",title:"–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å"},{icon:"camera.svg",href:"#",isModal:!0,modalId:"camera-modal",title:"–ö–∞–º–µ—Ä–∞"},{icon:"image.svg",href:"/qr/history",isModal:!1,title:"–ò—Å—Ç–æ—Ä–∏—è"}]}}}createPopupElements(){this.backdrop=document.createElement("div"),this.backdrop.className="mb-popup-backdrop",this.popupContainer=document.createElement("div"),this.popupContainer.className="mb-popup-container mb-popup-swipeable";const t=document.createElement("div");t.className="mb-swipe-indicator",this.popupContainer.appendChild(t),document.body.appendChild(this.backdrop),document.body.appendChild(this.popupContainer),this.backdrop.addEventListener("click",()=>this.closePopup()),this.popupContainer.addEventListener("touchstart",e=>{this.swipeStartY=e.touches[0].clientY}),this.popupContainer.addEventListener("touchend",e=>{e.changedTouches[0].clientY-this.swipeStartY>this.minSwipeDistance&&this.closePopup()})}setupSwipeDetection(){if(!this.core.container){const t=document.getElementById("nav-scroll-container");if(t)this.core.container=t;else return}this.core.container.addEventListener("touchstart",t=>{this.userHasInteracted=!0;const e=t.touches[0],i=e.clientX,s=e.clientY,o=Array.from(this.core.iconsContainer.querySelectorAll(".mb-icon-wrapper"));let n=null;for(const c of o){const a=c.getBoundingClientRect();if(i>=a.left&&i<=a.right&&s>=a.top&&s<=a.bottom){n=c;break}}n?(this.swipeTargetElement=n,this.swipeTargetIconId=n.getAttribute("data-icon-id"),this.swipeStartY=s,this.swipeStartX=i,this.isSwipeDetected=!1,this.isUpSwipeInProgress=!1,n.classList.add("mb-touch-active")):(this.swipeTargetElement=null,this.swipeTargetIconId=null,this.swipeStartY=0,this.swipeStartX=0)},{passive:!0}),this.core.container.addEventListener("touchmove",t=>{if(!this.swipeTargetElement||this.swipeStartY===0)return;const e=t.touches[0],i=this.swipeStartY-e.clientY,s=Math.abs(e.clientX-this.swipeStartX);if(i>15&&s<40&&(this.isUpSwipeInProgress=!0,this.swipeTargetElement.classList.contains("swiping-up")||this.swipeTargetElement.classList.add("swiping-up"),i>25&&(this.core.container.style.overflowX="hidden",t.preventDefault(),t.stopPropagation()),i>this.minSwipeDistance&&(this.isSwipeDetected=!0,navigator.vibrate&&this.userHasInteracted&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches)))try{navigator.vibrate(20)}catch{}},{passive:!1}),this.core.container.addEventListener("touchend",t=>{this.core.container.style.overflowX="auto",this.swipeTargetElement&&this.swipeTargetElement.classList.remove("mb-touch-active","swiping-up"),this.isSwipeDetected&&this.swipeTargetIconId&&(console.log(`–°–≤–∞–π–ø –≤–≤–µ—Ä—Ö –æ–±–Ω–∞—Ä—É–∂–µ–Ω –Ω–∞ –∏–∫–æ–Ω–∫–µ: ${this.swipeTargetIconId}`),this.showPopup(this.swipeTargetIconId)),this.swipeTargetElement=null,this.swipeStartY=0,this.swipeStartX=0,this.isSwipeDetected=!1,this.isUpSwipeInProgress=!1,this.swipeTargetIconId=null})}getCenteredItem(){return null}showPopup(t){const e=this.popupConfigs[t];if(!(!e||this.isPopupOpen)&&(this.currentPopupConfig=e,this.isPopupOpen=!0,this.currentIconId=t,this.renderPopupContent(e,t),requestAnimationFrame(()=>{this.backdrop.style.opacity="1",this.backdrop.style.visibility="visible",this.popupContainer.style.opacity="1",this.popupContainer.style.visibility="visible",this.popupContainer.style.transform="translateX(-50%) translateY(0)"}),navigator.vibrate&&this.userHasInteracted&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches))try{navigator.vibrate(50)}catch{}}renderPopupContent(t,e){this.popupContainer.className="mb-popup-container mb-popup-swipeable",this.popupContainer.classList.add(`popup-for-${e}`),this.getIconTitle(e),this.popupContainer.innerHTML=`
            <div class="mb-swipe-indicator"></div>
           
            <div class="mb-popup-grid">
                ${t.items.map((i,s)=>`
                        <a ${i.isModal?`href="javascript:void(0);" data-modal="true" data-modal-target="${i.modalId}" class="mb-popup-item modal-trigger no-spinner"`:`href="${i.href}" class="mb-popup-item"`} style="animation-delay: ${s*.1}s;">
                            <img src="/images/icons/${i.icon}" 
                                alt="${i.title}" 
                                title="${i.title}"
                                onerror="this.src='/images/icons/placeholder.svg'; this.classList.add('fallback-icon');"
                                onload="this.classList.add('loaded-icon');">
                            <span class="popup-item-title">${i.title}</span>
                        </a>
                    `).join("")}
            </div>
        `,this.ensureAnimationStyles(),this.setupPopupEventListeners()}getIconTitle(t){if(this.popupConfigs[t]&&this.popupConfigs[t].title)return this.popupConfigs[t].title;const e=this.core.iconsContainer.querySelector(`[data-icon-id="${t}"]`);if(e){const i=e.querySelector("img");if(i&&i.alt)return i.alt;const s=e.querySelector("a");if(s&&s.title)return s.title}return t?t.charAt(0).toUpperCase()+t.slice(1):""}setupPopupEventListeners(){this.popupContainer.addEventListener("click",e=>{e.target.closest(".mb-popup-grid")||(e.preventDefault(),this.closePopup())}),this.popupContainer.querySelectorAll(".mb-popup-item").forEach(e=>{e.hasAttribute("data-modal-target")?e.addEventListener("click",i=>{i.preventDefault();const s=e.getAttribute("data-modal-target");console.log("–°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–≤—è–∑—å –¥–ª—è –º–æ–¥–∞–ª–∫–∏",s,"—Å –∏–∫–æ–Ω–∫–æ–π",this.currentIconId),this.modalTriggers.set(s,{element:this.swipeTargetElement,iconId:this.currentIconId}),this.closePopup(),setTimeout(()=>{window.openModalPanel&&window.openModalPanel(s)},300)}):e.addEventListener("click",()=>{this.closePopup()})})}ensureAnimationStyles(){if(!document.querySelector("#mb-popup-animations")){const t=document.createElement("style");t.id="mb-popup-animations",t.textContent=`
                .mb-popup-item {
                      transform: translateY(20px);
    opacity: 0;
    animation: slideUpFade 0.3s ease forwards;
    display: flex
;
    flex-direction: row;
    align-items: center;
    gap: 5px;
    align-content: center;
    justify-content: flex-start;
                }
                .popup-item-title {
                   font-size: 16px;
    text-align: center;
    color: #333;
    margin-top: 0;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
                }
                @keyframes slideUpFade {
                    to {
                        transform: translateY(0);
                        opacity: 1;
                    }
                }
                .mb-popup-item .fallback-icon {
                    opacity: 0.4;
                    filter: grayscale(1);
                }
                .mb-popup-item .loaded-icon {
                    opacity: 1;
                    filter: none;
                }
                .mb-popup-item img {
                    transition: all 0.3s ease;
                    width: 32px;
                    height: 32px;
                }
                
                /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–ª–∞—Å—Å–∞ mb-touch-active –∏ swiping-up */
                .mb-icon-wrapper.mb-touch-active {
                    opacity: 0.8;
                    transform: scale(0.95);
                    transition: all 0.2s ease;
                }
                
                .mb-icon-wrapper.swiping-up {
                    transform: scale(0.92);
                }
                
                .mb-icon-wrapper.swiping-up::after {
                    content: '';
                    position: absolute;
                    top: -8px;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 0;
                    height: 0;
                    border-left: 6px solid transparent;
                    border-right: 6px solid transparent;
                    border-bottom: 8px solid rgba(0, 123, 255, 0.6);
                    animation: pulse 1s infinite;
                }
                
                @keyframes pulse {
                    0% { opacity: 0.4; }
                    50% { opacity: 1; }
                    100% { opacity: 0.4; }
                }
                
                /* –°—Ç–∏–ª–∏ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ –ø–æ–ø–∞–ø–∞ */
                .mb-popup-title {
                    margin: 0;
                    padding: 12px 20px 0;
                    text-align: center;
                    font-weight: 600;
                    font-size: 1rem;
                    color: #333;
                }
                
                /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–Ω–∞–∑–∞–¥" */
                .mb-icon-wrapper.back-button-active {
                    position: relative;
                    transform: scale(1.05);
                    transition: all 0.3s ease;
                }
                
                .mb-icon-wrapper.back-button-active::after {
                    content: '';
                    position: absolute;
                    bottom: -8px;
                    left: 50%;
                    width: 6px;
                    height: 6px;
                    background-color: #007bff;
                    border-radius: 50%;
                    transform: translateX(-50%);
                    animation: pulse 1.5s infinite;
                }
                
                .mb-icon-wrapper.back-button-active .mb-nav-icon {
                    filter: brightness(1.2);
                    animation: backButtonPulse 2s infinite;
                }
                
                @keyframes backButtonPulse {
                    0%, 100% { transform: scale(1); }
                    50% { transform: scale(1.1); }
                }
            `,document.head.appendChild(t)}}closePopup(){this.isPopupOpen&&(this.backdrop.style.opacity="0",this.backdrop.style.visibility="hidden",this.popupContainer.style.opacity="0",this.popupContainer.style.transform="translateX(-50%) translateY(100px)",setTimeout(()=>{this.popupContainer.style.visibility="hidden",this.isPopupOpen=!1,this.currentPopupConfig=null},400))}blockHorizontalScroll(){return this.isUpSwipeInProgress}}class b{constructor(t){this.core=t,this.isScrolling=!1,this.scrollTimeout=null,this.animationFrame=null,this.isCentering=!1,this.centeringQueue=[],this.lastDebounceTime=0,this.debounceThreshold=150,this.lastScrollLeft=0,this.scrollDirection=0,this.debounceTimeout=null,this.lastPageScroll=0,this.pageScrollTimeout=null,this.pageScrollThreshold=10,this.hideNavigationTimeout=null,this.isNavigationHidden=!1,this.lastUserActionTime=Date.now(),this.inactivityTimeout=null,this.inactivityThreshold=1500,this.inertiaEnabled=!0,this.inertiaFactor=.92,this.inertiaThreshold=.5,this.momentumValue=0,this.rafId=null,this.userHasInteracted=!1,this.initUserInteractionTracking(),this.lastScrollTime=0,this.setupScrollTimeTracking()}setupScrollTimeTracking(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{this.setupScrollListener()}):setTimeout(()=>this.setupScrollListener(),100)}setupScrollListener(){this.core&&this.core.container?this.core.container.addEventListener("scroll",()=>{this.lastScrollTime=Date.now()},{passive:!0}):setTimeout(()=>this.setupScrollListener(),500)}applyInertia(t){if(!this.inertiaEnabled||Math.abs(t)<this.inertiaThreshold)return;this.momentumValue=t*15,this.rafId&&cancelAnimationFrame(this.rafId);const e=()=>{this.core.container.scrollLeft+=this.momentumValue,this.momentumValue*=this.inertiaFactor,Math.abs(this.momentumValue)>this.inertiaThreshold?this.rafId=requestAnimationFrame(e):this.rafId=null};this.rafId=requestAnimationFrame(e)}getMaxScrollLeft(){const t=this.core.container.offsetWidth,e=this.core.iconsContainer.scrollWidth;return Math.max(0,e-t)}setupPageScrollListener(){window.addEventListener("scroll",()=>{this.handlePageScroll()},{passive:!0}),this.setupTouchListeners()}setupTouchListeners(){let t=null,e=null;document.addEventListener("touchstart",i=>{t=i.touches[0].clientY},{passive:!0}),document.addEventListener("touchmove",i=>{if(!t)return;e=i.touches[0].clientY;const s=t-e;s<-30?this.showNavigation():s>30&&this.hideNavigation()},{passive:!0}),document.addEventListener("touchend",()=>{t=null,e=null},{passive:!0})}handlePageScroll(){if(!document.querySelector(".mb-navigation"))return;this.lastUserActionTime=Date.now();const e=window.pageYOffset||document.documentElement.scrollTop;this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.inactivityTimeout&&clearTimeout(this.inactivityTimeout),e>this.lastPageScroll&&e>this.pageScrollThreshold?this.hideNavigation():e<this.lastPageScroll&&this.showNavigation(),this.pageScrollTimeout=setTimeout(()=>{Date.now()-this.lastUserActionTime>=this.inactivityThreshold&&this.showNavigation()},this.inactivityThreshold),this.setupInactivityDetection(),this.lastPageScroll=e}setupInactivityDetection(){this.inactivityTimeout&&clearTimeout(this.inactivityTimeout),this.inactivityTimeout=setTimeout(()=>{this.isNavigationHidden&&this.showNavigation()},this.inactivityThreshold)}hideNavigation(){const t=document.querySelector(".mb-navigation");!t||this.isNavigationHidden||requestAnimationFrame(()=>{t.classList.add("mb-nav-hidden"),this.isNavigationHidden=!0,this.lastUserActionTime=Date.now(),this.hideNavigationTimeout&&(clearTimeout(this.hideNavigationTimeout),this.hideNavigationTimeout=null),setTimeout(()=>{this.setupInactivityDetection()},100)})}showNavigation(){const t=document.querySelector(".mb-navigation");!t||!this.isNavigationHidden||(this.hideNavigationTimeout&&(clearTimeout(this.hideNavigationTimeout),this.hideNavigationTimeout=null),navigator.vibrate&&this.isNavigationHidden&&navigator.vibrate(5),requestAnimationFrame(()=>{setTimeout(()=>{t.classList.remove("mb-nav-hidden"),this.isNavigationHidden=!1,this.lastUserActionTime=Date.now(),this.inactivityTimeout&&(clearTimeout(this.inactivityTimeout),this.inactivityTimeout=null),this.setupInactivityDetection()},50)}))}registerUserActivity(){this.lastUserActionTime=Date.now(),this.setupInactivityDetection()}setupUserActivityListeners(){["touchstart","touchmove","mousemove","click","keydown","wheel"].forEach(e=>{document.addEventListener(e,()=>{this.registerUserActivity()},{passive:!0})})}canUseVibrateAPI(){return navigator.vibrate&&this.userHasInteracted&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches}initUserInteractionTracking(){const t=["click","touchstart","touchmove","mousedown","keydown"],e=()=>{this.userHasInteracted=!0,t.forEach(i=>{document.removeEventListener(i,e,{passive:!0})})};t.forEach(i=>{document.addEventListener(i,e,{passive:!0})})}}class w{constructor(t,e){this.core=t,this.scroll=e}getScrollBounds(){const t=this.core.container.offsetWidth,e=this.core.iconsContainer.scrollWidth,i=e-t;return{containerWidth:t,scrollWidth:e,maxScrollLeft:i,currentScrollLeft:this.core.container.scrollLeft,sidePadding:this.core.sidePadding}}getMaxScrollForLastItem(){if(this.core.items.length===0)return 0;const t=this.core.items[this.core.items.length-1],e=this.core.container.offsetWidth,i=t.offsetLeft-e/2+t.offsetWidth/2;return Math.max(0,i)}setupIntersectionObserver(){if(!("IntersectionObserver"in window))return;const t={root:this.core.container,rootMargin:"0px",threshold:.5},e=new IntersectionObserver(i=>{i.forEach(s=>{s.isIntersecting?s.target.classList.add("mb-visible"):s.target.classList.remove("mb-visible")})},t);document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".mb-icon-wrapper").forEach(s=>e.observe(s))})}}class I{constructor(){this.storageKey="mobileNavState",this.routeToIconMap=this.createRouteMapping(),this.storageAvailable=this.checkStorageAvailability()}checkStorageAvailability(){try{const t="__storage_test__";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}}createRouteMapping(){return{"/":"home","/home":"home","/user/templates":"profile","/profile":"profile","/client/templates/categories":"create","/client/templates":"create","/client/projects":"create","/client/images":"create","/admin/dashboard":"admin","/admin":"admin","/games":"games","/email":"email"}}getIconForCurrentPage(){const t=window.location.pathname;if(this.routeToIconMap[t])return this.routeToIconMap[t];for(const[e,i]of Object.entries(this.routeToIconMap))if(e!=="/"&&t.startsWith(e))return i;return null}getPriorityIcon(){const t=this.getIconForCurrentPage();return t||"home"}clearExpiredData(){if(this.storageAvailable)try{const t=localStorage.getItem(this.storageKey);if(t){const e=JSON.parse(t);(!e||!e.timestamp||Date.now()-e.timestamp>24*60*60*1e3)&&localStorage.removeItem(this.storageKey)}}catch(t){console.warn("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:",t);try{localStorage.removeItem(this.storageKey)}catch{}}}}class T{constructor(){this.core=new g,this.scroll=new b(this.core),this.utils=new w(this.core,this.scroll),this.popup=new v(this.core),this.events=new f(this.core,this.scroll,this.popup),this.storage=new I,this.init()}init(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{this.postInit()}):this.postInit()}postInit(){setTimeout(()=>{this.core.showNavigation(),this.scroll.setupPageScrollListener(),this.utils.setupIntersectionObserver()},400)}}typeof window<"u"&&(window.MobileNavWheelPicker=new T);
